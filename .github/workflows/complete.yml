name: Skyline Reusable Quality Workflow

on:
  push:
    branches:
      - '**'
    tags:
      - "[0-9]+.[0-9]+.[0-9]+.[0-9]+"
      - "[0-9]+.[0-9]+.[0-9]+.[0-9]+-**"
      - "[0-9]+.[0-9]+.[0-9]+"
      - "[0-9]+.[0-9]+.[0-9]+-**"
  workflow_dispatch:

# ðŸ‘‡ FULL PERMISSIONS (updated with models: read)
permissions:
  actions: write
  attestations: write
  checks: write
  contents: write
  deployments: write
  discussions: write
  issues: write
  models: read
  packages: write
  pages: write
  pull-requests: write
  repository-projects: write
  statuses: write
  security-events: write
  id-token: write
  workflows: write


jobs:
  CI:
    uses: SkylineCommunications/_ReusableWorkflows/.github/workflows/DataMiner App Packages Master Workflow.yml@main
    with:
      configuration: Release
      sonarCloudProjectName: ${{ vars.SONAR_NAME }}
      # solutionFilterName: "MySolutionFilter.slnf"
    secrets:
      dataminerToken: ${{ secrets.DATAMINER_TOKEN }}
      sonarCloudToken: ${{ secrets.SONAR_TOKEN }}
      # overrideCatalogDownloadToken: ${{ secrets.OVERRIDE_DATAMINER_TOKEN }}
